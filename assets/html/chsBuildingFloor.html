<!DOCTYPE html>
<html>
  <head>
    <title>PTC Floor Map</title>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="stylesheet" href="/Map_Navigation/assets/css/floor.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <script src="/Map_Navigation/assets/js/leaflet-indoor.js"></script>
  </head>

  <body>
    <div id="map"></div>
    <script
      type="text/javascript"
      src="/Map_Navigation/data/floorMapData/chsFloor.js"
    ></script>
    <script type="text/JavaScript">

      roomCallBacks = function (feature, layer) {
        layer.on('mouseover', function () {
          layer.setStyle({fillColor: '#02d35f'})
        });
        layer.on('mouseout', function () {
          layer.setStyle({fillColor: '#c0c0c0'})
        });
      }

      map = L.map('map');

      var cartoLight = L.tileLayer(
              "https://api.mapbox.com/styles/v1/shoji-yamada/cl0pbw9ry001914mlx7h5ljpd/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1Ijoic2hvamkteWFtYWRhIiwiYSI6ImNrdWd3M3Z3NDAxbWMyb3F0cGE5a3N0b2wifQ.u8mZVVWfCnxmT_6_FXzVzw",
              {
        minZoom: 3,
        maxZoom: 23,
      });
      map.setView(new L.LatLng(16.046504279586813, 120.34206569194794), 21);
      map.addLayer(cartoLight);

      var indoor = new L.Indoor(geoJSON, {
        minCaptionZoom: 18,
        onEachFeature: roomCallBacks
      });
      indoor.addTo(map);

      L.easyButton(
        "<i class='fa fa-chevron-left'></i>",
        function () {
          window.location.href = "/Map_Navigation/index.php";
        },
        "Go back to main campus"
      ).addTo(map);

      var legend = L.control({position: 'topright'});
      legend.onAdd = function(map) {
        var d = "Select Floor";
        var div = L.DomUtil.create('div', 'info legend');
        div.appendChild(document.createTextNode(d));
        return div;
      };
      legend.addTo(map);

      var legend = L.control({position: 'bottomleft'});
      legend.onAdd = function(map) {
        var d = "CHS Building";
        var div = L.DomUtil.create('div', 'building_name legend');
        div.appendChild(document.createTextNode(d));
        return div;
      };
      legend.addTo(map);

        var levelControl = new L.Control.Level({
          level: 1,
          levels: indoor.getLevels(),
          indoorLayer: indoor
        });
        levelControl.addTo(map);
    </script>
  </body>
</html>
